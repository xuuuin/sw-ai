<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>졸음 방지 스터디 타이머 - Team 9</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision/vision_bundle.js" crossorigin="anonymous"></script>
</head>
<body>

<div class="container">
    <div id="setupScreen" class="setup-screen active">
        <h2>오늘의 공부 목표는 무엇인가요?</h2>
        <input type="text" id="studyGoal" placeholder="예: 웹 프로그래밍 과제, 알고리즘 공부">
        
        <h4>📅 시험(목표) 날짜를 선택하세요</h4>
        <input type="date" id="dDayInput">
        
        <h3>집중 모드(졸음 감지 민감도)를 선택하세요.</h3>
        <div class="radio-group">
            <label class="radio-label"><input type="radio" name="sensitivity" value="5.0"> 1단계 (피곤해요): 5초 허용</label>
            <label class="radio-label"><input type="radio" name="sensitivity" value="3.0" checked> 2단계 (보통이에요): 3초 허용</label>
            <label class="radio-label"><input type="radio" name="sensitivity" value="2.0"> 3단계 (집중할래요): 2초 허용</label>
            <label class="radio-label"><input type="radio" name="sensitivity" value="0.5"> 4단계 (스파르타): 0.5초 허용</label>
        </div>
        
        <button class="btn-start" onclick="startStudy()">공부 시작</button>
    </div>

    <div id="studyScreen" class="study-screen">
        <div>
            <span id="dDayDisplay" class="d-day-badge">D-Day</span>
            <div id="goalDisplay" class="study-goal-display"></div>
        </div>

        <div class="video-container">
            <video id="webcam" autoplay playsinline></video>
            <canvas id="output_canvas"></canvas>
            <div id="statusText" class="status-overlay">준비 중...</div>
            <div id="pauseOverlay" class="pause-overlay">PAUSED</div>
        </div>

        <div id="mainTimer" class="timer-display">00:00</div>
        <div id="statsDisplay">집중: 00:00 | 졸음: 00:00</div>

        <div>
            <button class="btn-pause" onclick="togglePause()">일시 정지 / 계속</button>
            <button class="btn-end" onclick="endStudy()">공부 종료</button>
        </div>
    </div>

    <div id="resultScreen" class="result-screen">
        <h2>📊 공부 결과</h2>
        <p>총 공부 시간: <span id="resTotal"></span></p>
        <p>집중 시간: <span id="resFocus"></span></p>
        <p>졸음/이석 시간: <span id="resDrowsy"></span></p>
        
        <div class="progress-bar">
            <div id="resProgress" class="progress-fill"></div>
        </div>
        <p id="resScore" style="font-weight:bold; font-size:1.2rem;"></p>
        
        <button class="btn-restart" onclick="location.reload()">새로운 공부 시작</button>
    </div>

    <div class="footer">© 2025 9조 (Team 9)</div>
</div>

<script type="module" src="script.js"></script>

</body>
</html>